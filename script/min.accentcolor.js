/* accentColor script by Joel Besada (http://www.joelb.me). MIT Licensed */
;(function(){function u(d,a,f,g){if(d){-1===d.indexOf("http")&&(d="http://"+d);var b=new XMLHttpRequest;v&&a?(b.open("GET",a+"?url="+d,!0),b.responseType="text"):(b.open("GET","http://g.etfv.co/"+d+"?defaulticon=none",!0),b.responseType="arraybuffer");b.onreadystatechange=function(){if(4===b.readyState)if(200===b.status){var a,p,k,s,q=new Image;if("arraybuffer"===b.responseType){var l=b.response;l&&(a=new Uint8Array(l),a=w(a))}else a=b.responseText;q.onload=function(){p=document.createElement("canvas");
p.width=p.height=m;k=p.getContext("2d");k.drawImage(q,0,0,m,m);for(var a=k.getImageData(0,0,m,m).data,b,n,h,c,e={},l,j=0;j<a.length;j+=4){b=a[j];n=a[j+1];h=a[j+2];c=a[j+3];if(!(c=127>c)){c=n;var i=h,r=(b+c+i)/3;c=15>Math.abs(b-r)&&15>Math.abs(c-r)&&15>Math.abs(i-r)}if(!c)if(propStr=b+","+n+","+h,e[propStr])e[propStr]++;else{a:{b=e;n=propStr;h=void 0;for(h in b){if(c=b.hasOwnProperty(h))i=n,c=h.split(","),i=i.split(","),c=10>(Math.abs(c[0]-i[0])+Math.abs(c[1]-i[1])+Math.abs(c[2]-i[2]))/3;if(c){b=h;
break a}}b=null}(l=b)?e[l]++:e[propStr]=1}}var a=0,t,o;for(o in e)e.hasOwnProperty(o)&&e[o]>a&&(a=e[o],t=o);(s=(e=t)?"rgb("+e+")":null)?f(s):g("No accent color found for "+d)};a?q.src=x+a:g("No response from "+d)}else 204===b.status?g("No response from "+d):g("Service Unavailable")};b.send(null)}else g("Missing URL parameter")}function w(d){var a,f,g="";for(a=0,f=d.length;a<f;a++)g+=String.fromCharCode(d[a]);return btoa(g)}var k={url:null,proxy:null,onComplete:function(){},onError:function(){}},m=
16,x="data:image/png;base64,",v=!window.ArrayBuffer||!window.Uint8Array||void 0===(new XMLHttpRequest).withCredentials,y=!!document.createElement("canvas").getContext;window.getAccentColor=function(d){if(y){var a={},f;for(f in k)k.hasOwnProperty(f)&&(a[f]=d[f]||k[f]);u(a.url,a.proxy,a.onComplete,a.onError)}}})();